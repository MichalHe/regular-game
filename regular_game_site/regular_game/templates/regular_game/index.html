{% extends "./template.html" %}

{% block content %}

<!-- Game finished alert -->
<div class="container-fluid p-5">
  {% if player %}
  <div class="alert alert-success">
    <strong>Konec hry!</strong> Získané body: <strong>{{ player.score }}</strong>.
    <form action="{% url 'regular_game:index' %}" method="get">
      {% csrf_token %}
      <button type="submit" class="mt-3 btn btn-primary">Zpět na úvodní stránku</button>
    </form>
  </div>

  
  {% else %}
  <!-- Name form -->
  <form autocomplete="off" action="{% url 'regular_game:start_game' %}" method="post">
    {% csrf_token %}
    <div class="row mb-3">
      <div class="col-sm-4"></div>
      <label class="col-sm-1 col-form-label text-end" for="plname">Jméno:</label>
      <div class="col-sm-2">
        <input type="text" class="form-control" id="plname" name="plname" placeholder="Zadejte jméno">
      </div>
      <div class="col-sm-1">
        <button type="submit" class="btn btn-primary">Nová hra</button>
      </div>
    </div>
    {% if error_message %}
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="alert alert-danger col-sm-4">
        <strong>Chyba!</strong> {{ error_message }}
      </div>
    </div>
    {% endif %}
  </form>
  {% endif %}
</div>


<!-- Leaderboard -->
<div class="container-fluid bg-grey flex-fill">
  <h2>Žebříček</h2>
  {% if highscore_list %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Hráč</th>
        <th>Začátek hry</th>
        <th>Délka hry</th>
        <th>Score</th>
      </tr>
    </thead>
    <tbody>
      {% for player in highscore_list %}
      <tr>
          <td>{{ player.name }}</td>
          <td>{{ player.time_begin }}</td>
          <td>{{ player.duration }}</td>
          <td>{{ player.score }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
      <p>Žádný hráč zatím hru nedokončil.</p>
  {% endif %}
</div>

{% endblock %}