{% extends "./template.html" %}

{% block content %}

<!-- Game finished alert -->
<div class="container-fluid p-5">
  {% if player %}
  <div class="alert alert-success">
    <strong>Konec hry!</strong> Získané body: <strong>{{ player.score }}</strong>.
    <form action="{% url 'regular_game:index' %}" method="get">
      {% csrf_token %}
      <button type="submit" class="mt-3 btn btn-primary">Zpět na úvodní stránku</button>
    </form>
  </div>

  
  {% else %}
  <!-- Name form -->
  <form autocomplete="off" action="{% url 'regular_game:start_game' %}" method="post">
    {% csrf_token %}
    <div class="row mb-3">
      <div class="col-sm-4"></div>
      <label class="col-sm-1 col-form-label text-end" for="plname">Jméno:</label>
      <div class="col-sm-2">
        <input type="text" class="form-control" id="plname" name="plname" placeholder="Zadejte jméno">
      </div>
      <div>
        Za koho chceš hrát?
        <img src="https://c.tenor.com/_jbZnDIerhwAAAAM/4th-of-july-independence-day.gif" alt="Čak" caption width="300"/>
        <label for="chuck">Čak Noris</label>
        <input type="radio" id="chuck" name="chuck"><br>
        <img src="https://c.tenor.com/JOX66MJe7DwAAAAM/mac-gyver-smiling.gif" alt="Mekgajvr" caption width="300"/>
        <label for="macgyver">Mekgajvr</label>
        <input type="radio" id="macgyver" name="macgyver"><br>
        <img src="https://c.tenor.com/tZVpbfTIjNMAAAAM/pikachu.gif" alt="Pikaču" caption width="300"/>
        <label for="pikachu">Pikaču</label>
        <input type="radio" id="pikachu" name="pikachu"><br>
        <img src="https://compote.slate.com/images/05a4298a-2eb6-4346-a8f8-2c80f34aaa98.jpg" alt="Agent Bureš" caption width="300"/>
        <label for="bures">Agent Bureš</label>
        <input type="radio" id="bures" name="bures"><br>
      </div>
      <div class="col-sm-1">
        <button type="submit" class="btn btn-primary">Nová hra</button>
      </div>
    </div>
    {% if error_message %}
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="alert alert-danger col-sm-4">
        <strong>Chyba!</strong> {{ error_message }}
      </div>
    </div>
    {% endif %}
  </form>
  {% endif %}
</div>


<!-- Leaderboard -->
<div class="container-fluid bg-grey flex-fill">
  <h2>Žebříček</h2>
  {% if highscore_list %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th></th>
        <th>Hráč</th>
        <th>Začátek hry</th>
        <th>Délka hry</th>
        <th>Score</th>
      </tr>
    </thead>
    <tbody>
      {% for player in highscore_list %}
      <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ player.name }}</td>
          <td>{{ player.time_begin }}</td>
          <td>{{ player.duration }}</td>
          <td>{{ player.score }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
      <p>Žádný hráč zatím hru nedokončil.</p>
  {% endif %}
</div>

{% endblock %}
